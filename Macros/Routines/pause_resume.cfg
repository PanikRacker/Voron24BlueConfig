[pause_resume]

[gcode_macro PAUSE]
rename_existing: PAUSE_BASE
gcode:
    {% set location = params.LOCATION | default("pause") | lower %}
    SET_GCODE_VARIABLE MACRO=RESUME VARIABLE=etemp VALUE={printer['extruder'].target}
    CG28
    PAUSE_BASE
    _PARK_SAFE LOCATION={location}

[gcode_macro RESUME]
rename_existing: RESUME_BASE
gcode:
    {% set heat_soak_stage = printer['gcode_macro HEAT_SOAK'].stage %}
    _DEBUG MSG={heat_soak_stage}
    {% if stage in ("heating", "soaking") %}
        HEAT_SOAK_RESUME ON_RESUME=_HEAT_SOAK__BASE_RESUME
    {% endif %}
