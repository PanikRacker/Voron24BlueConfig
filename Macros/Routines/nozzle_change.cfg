[gcode_macro NOZZLE_CHANGE]
gcode:
    {% set hotend_temp = params.TEMPERATURE | default(0) | float %}
    {% if printer.idle_timeout.state != "Printing" %}
        PARK LOCATION="nozzle-change"
        M109 S{hotend_temp}
    {% else %}
        _DEBUG MSG="Nozzle change not allowed during printing"
    {% endif %}
