[gcode_macro NOZZLE_CHANGE]
gcode:
    {% set hotend_temp = params.TEMPERATURE | default(0) | float %}
    {% if printer.idle_timeout.state != "Printing" %}
        {% if hotend_temp > 0 %}
            M109 S{hotend_temp}
        {% endif %}
        PARK LOCATION="nozzle-change"
    {% else %}
        _DEBUG MSG="Nozzle change not allowed during printing"
    {% endif %}
