[gcode_macro PREPARE_NOZZLE]
gcode:
    {% set EXTRUDER_TEMP = params.EXTRUDER | default(0) | float %}

    CG28

    {% if EXTRUDER_TEMP > 0 %}
        _status_heating
        {% set nozzle_clean_msg = "Wait until hotend reaches %.1fC for a better purge and nozzle cleaning ..." % (EXTRUDER_TEMP) %}
        M117 {bed_startup_msg}
        M109 S{EXTRUDER_TEMP}
    {% endif %}

    _status_cleaning
    clean_nozzle
    _status_off