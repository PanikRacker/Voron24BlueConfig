[gcode_macro PRINT_START]
gcode:
    {% set EXTRUDER_TEMP = params.EXTRUDER_TEMP | default(220) | float %}
    {% set BED_TEMP = params.BED_TEMP | default(60) | float %}

    CG28
    CQGL PARK_BED={False}
    PARKPURGE

    _status_heating
    {% set bed_startup_msg = "Holding print bed temperature at %.1fC" % (BED_TEMP) %}
    M117 {bed_startup_msg}
    M190 S{BED_TEMP}

    SET_FAN_SPEED FAN=Nevermore SPEED=0.8
    M117 "Started Nevermore filter fan"
    M117 "Cleaning extruder nozzle ..."
    PREPARE_NOZZLE EXTRUDER={EXTRUDER_TEMP}

    M117 "Create/Load bed mesh ..."
    _get_bed_mesh PARK_BED={False}
    PARKPURGE
    M117 "Clean nozzle again before printing ..."
    PREPARE_NOZZLE

    _status_heating
    {% set bed_printing_msg = "Wait until bed temperature settled at %.1fC" % (BED_TEMP) %}
    {% set extruder_printing_msg = "Wait until hotend temperature settled at %.1fC" % (BED_TEMP) %}
    M117 {bed_printing_msg}
    M190 S{BED_TEMP}
    M117 {extruder_printing_msg}
    M109 S{EXTRUDER_TEMP}

    _status_printing