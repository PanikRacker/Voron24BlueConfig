[gcode_macro M109]
rename_existing: M99109
gcode:
    {% set temperature = params.S | replace(',', '.') | float | round(0, 'ceil') | int %}
    M104 S{temperature}
    {% if temperature != 0 %}
        TEMPERATURE_WAIT SENSOR=extruder MINIMUM={temperature-2} MAXIMUM={temperature+3}
    {% endif %}