[gcode_macro PARK]
gcode:
    {% set location = params.LOCATION | lower %}

    SAVE_GCODE_STATE NAME=STATE_PARK

    {% if printer.idle_timeout.state != "Printing" %}
        CG28

        {% if location == 'bed' %}
            _PARKBED
        {% endif %}
        {% if location == 'center' %}
            _PARKCENTER
        {% endif %}
        {% if location == 'frontlow' or location == 'front-low' or location == 'front_low' %}
            _PARKFRONTLOW
        {% endif %}
        {% if location == 'front' %}
            _PARKFRONT
        {% endif %}
        {% if location == 'pause' %}
            _PARKPAUSE
        {% endif %}
        {% if location == 'purge' %}
            _PARKPURGE
        {% endif %}
        {% if location == 'rear' %}
            _PARKREAR
        {% endif %}
        {% if location == 'warmup' or location == 'warm-up' or location == 'warm_up' %}
            _PARKWARMUP
        {% endif %}
    {% endif %}

    RESTORE_GCODE_STATE NAME=STATE_PARK