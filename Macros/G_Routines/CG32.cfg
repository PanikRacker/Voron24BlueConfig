[gcode_macro CG32]
gcode:
    {% set calibrate_z = params.CALIBRATE_Z | default(True) %}
    {% set extruder_temp = params.EXTRUDER_TEMP | default(0) | float %}
    {% set park_bed = params.PARK_BED | default(True) %}

    SAVE_GCODE_STATE NAME=STATE_CG32
    G90
    CG28
    CQGL CALIBRATE_Z={calibrate_z} EXTRUDER_TEMP={extruder_temp} PARK_BED={park_bed}
    RESTORE_GCODE_STATE NAME=STATE_CG32