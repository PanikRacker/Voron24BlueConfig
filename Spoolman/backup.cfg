[gcode_shell_command BACKUP_SPOOLMAN]
command: /usr/bin/bash /home/voron24blue/printer_data/config/Spoolman/spoolman.sh
timeout: 30
verbose: True

[delayed_gcode BACKUP_SPOOLMAN]
gcode:
    RUN_SHELL_COMMAND CMD=BACKUP_SPOOLMAN

[gcode_macro BACKUP_SPOOLMAN]
gcode:
    {% set delay = params.DELAY | default(1) | int %}
    UPDATE_DELAYED_GCODE ID=BACKUP_SPOOLMAN DURATION={delay}

[gcode_macro _BACKUP_SPOOLMAN_RANDOMIZED]
gcode:
    {% set delay = params.DELAY | default(1) | int %}
    {% if ((range(10) | random) % 2) > 0 %}
        BACKUP_SPOOLMAN DELAY={delay}
    {% endif %}
